import{o as n,b as i,e as _,t as b,j as w,n as $,g as h,q as y,v as x,x as k,a as f,h as r,y as B,z as I,c as S,i as m}from"./vendor-Cz5a7hiG.js";import{_ as T,a as F}from"./index-DEBGdHOs.js";const L={__name:"AlertBar",props:{type:String,label:String},setup(e){return(t,o)=>(n(),i("div",{class:$(["alert-bar",e.type])},[_(b(e.label)+" ",1),w(t.$slots,"default")],2))}},C=["src"],M={__name:"IconEye",props:{strike:Boolean},setup(e){const t=e,o=h(()=>t.strike?"/svg/eye-strike.svg":"/svg/eye.svg");return(l,a)=>(n(),i("img",{src:o.value,class:"svg-icon-eye"},null,8,C))}},P={key:0,class:"ws-label"},E={class:"text-input-row"},N=["type","disabled","name","placeholder","readonly"],D=["innerHTML"],U={__name:"TextInput",props:y({type:{type:String,default:"text"},name:String,label:String,unit:String,isDisabled:Boolean,isReadonly:Boolean,placeholder:String},{modelValue:{},modelModifiers:{}}),emits:y(["inFocus"],["update:modelValue"]),setup(e,{emit:t}){const o=e,l=t,a=x(e,"modelValue"),c=k(!1),u=k(!1),d=h(()=>u.value?"text":o.type),p=h(()=>(o.placeholder?o.placeholder:o.label).toLowerCase());return(g,s)=>{const V=M;return n(),i("div",{class:$(["text-input",[{hasFocus:c.value},p.value]])},[e.label?(n(),i("div",P,b(e.label),1)):f("",!0),r("div",E,[B(r("input",{type:d.value,disabled:e.isDisabled,name:e.name,placeholder:e.placeholder,readonly:e.isReadonly,"onUpdate:modelValue":s[0]||(s[0]=v=>a.value=v),spellcheck:"false",onFocus:s[1]||(s[1]=v=>{c.value=!0,l("inFocus")}),onBlur:s[2]||(s[2]=v=>{c.value=!1})},null,40,N),[[I,a.value,void 0,{trim:!0}]]),e.unit?(n(),i("span",{key:0,class:"unit",innerHTML:g.units},null,8,D)):f("",!0),e.type==="password"?(n(),S(V,{key:1,strike:u.value,onClick:s[3]||(s[3]=v=>u.value=!u.value)},null,8,["strike"])):f("",!0)])],2)}}},O={class:"big-label"},z={__name:"BigLabel",props:{label:String},setup(e){return(t,o)=>(n(),i("div",O,[_(b(e.label)+" ",1),w(t.$slots,"default")]))}},A="/--/admin/svg/route.svg",H={data(){return{username:"joeri@bespired.nl",password:"",tfa:"123456",error:!1,msg:"Something went wrong"}},methods:{validate(){return this.username.length<4?(this.msg="Email is a bit short",this.error=!0,!1):this.password.length<8?(this.msg="Password is a bit short",this.error=!0,!1):!0},success(e){switch(e.message.area){case"backend":e.message.role.split(";").forEach(o=>{let l=o.split(":")[0].trim();localStorage.setItem(`${l}:role`,o.split(":")[1].trim()),localStorage.setItem(`${l}:domain`,e.message.domains[l].domain)})}localStorage.setItem("contact",e.message.contact),localStorage.setItem("token",e.token),this.$store.commit("main/setLoggedIn"),this.$store.dispatch("main/loadUser"),this.$store.commit("main/postWsMessage","--login"),this.$emit("completed")},fail(e){this.msg=e.message,this.error=!0},login(){if(!this.validate())return;let e={username:this.username,password:this.password,tfa:this.tfa};fetch("https://eventlab.com/--/profile/0/login/backend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(l=>l.json()).then(l=>{l.hasOwnProperty("success")&&this.success(l),l.hasOwnProperty("error")&&this.fail(l)})}}},R={class:"login-panel"},q={class:"login-layout"};function J(e,t,o,l,a,c){const u=z,d=U,p=F,g=L;return n(),i("div",R,[t[6]||(t[6]=r("div",{class:"event-lab-logo"},[r("img",{src:A}),r("div",null,"EVENT LAB")],-1)),r("div",q,[m(u,{label:"Sign In"}),m(d,{placeholder:"Username",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=s=>a.username=s),onInFocus:t[1]||(t[1]=s=>a.error=!1)},null,8,["modelValue"]),m(d,{placeholder:"Password",modelValue:a.password,"onUpdate:modelValue":t[2]||(t[2]=s=>a.password=s),type:"password",onInFocus:t[3]||(t[3]=s=>a.error=!1)},null,8,["modelValue"]),m(p,{label:"Login",type:"primary",onClick:t[4]||(t[4]=s=>c.login())}),a.error?(n(),S(g,{key:0,class:"error",label:a.msg,type:"error"},null,8,["label"])):f("",!0),m(p,{class:"forgot",label:"Forgot Password",type:"link"})]),r("span",{class:"top-right",onClick:t[5]||(t[5]=s=>e.$emit("completed"))},"Ã—")])}const K=T(H,[["render",J]]);export{K as default};
